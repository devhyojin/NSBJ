# 기능 명세서 (초안)

> 🔥지옥문이 보이는 기능 명세서 초안🔥

## 회원관리

| 요구사항           | 설명                                                        | 비고                                                         |
| ------------------ | ----------------------------------------------------------- | ------------------------------------------------------------ |
| 회원가입           | 최초 소셜 로그인을 통해 소셜계정에서 제공받는 회원정보 등록 | 카카오에서 받는 항목: 회원번호 / 닉네임: 랜덤 저장 (낮/밤인지 따라 새/쥐) |
| 로그인/로그아웃    | 회원의 서비스 이용을 위한 로그인/로그아웃 기능을 구현       | 카카오에서 제공하는 토큰으로 로그인/로그아웃 구현            |
| 회원 탈퇴          | 회원 탈퇴 선택 시 Flag False처리                            | flag변수에 False ==> 특정 시간 지나고 false인 애들 데이터 삭제 |
| 닉네임 무작위 부여 | 모드에 따라서 닉네임을 무작위로 부여 받음                   | 기상청 api를 통해 현재 일출,일몰에 따라 모드 변경            |

<br>

## 메인페이지

| 요구사항              | 설명                                                         | 비고                                              |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------- |
| 시간에 따라 모드 변경 | 일몰, 일출 시간에 따라 서비스 배경 색 변경(라이트-새,다크모드-쥐) | 기상청 api를 통해 현재 일출,일몰에 따라 모드 변경 |
| 사용자 위치 저장/표시 | 사용자의 현 위치를 저장하고 주변 사용자들 위치 표현          | 클릭 시 울음소리 첨부                             |
| 채팅방으로 이동       | 채팅방 이동 버튼 활성화됨                                    |                                                   |

<br>

## 채팅

| 요구사항              | 설명                                                         | 비고                                                         |
| --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 위치 기반 채팅방 생성 | 유저의 현재 위치를 기반으로 채팅방 생성                      | 채팅방이 없는 경우 (지역명/pk 기준 key가 존재하지 않을 때) => 채팅방 생성 |
| 위치 기반 채팅방 등록 | 유저를 현재 지역 채팅방에 등록                               | 채팅방이 있는 경우 (지역명/pk 기준 key가 존재) => 유저 등록 => cnt |
| 채팅 입력             | 사용자들이 남긴 채팅 저장                                    |                                                              |
| 채팅 조회             | 각 채팅방의 채팅 내역 조회                                   |                                                              |
| 전체 알림 기능        | 채팅창 상단에 전체 알림 조회                                 | 알림은 상단에 고정 (기본 n분, 그 이상은 다른 사람이 공지를 쓸 경우 교체) |
| 도배 및 욕설 방지     | 같은 단어나 문장을 n회 이상 연속적으로 입력시 n분 채팅금지 / 특정욕설 입력시 필터링 진행 | 프론트에서 버튼 막아버리세요 유저테이블에 추가 안해줄거임ㅋㅋㅋㅋㅋ |

- 도배 및 욕설 방지: 프론트에서 일정 시간안에 요청이 일정 횟수 이상 들어오면 몇초간 채팅 기능 정지
- disabled 하고서 setTimeout으로 풀어주면 될듯

<br>

## 마이페이지

| 요구사항       | 설명                                                         | 비고                                           |
| -------------- | ------------------------------------------------------------ | ---------------------------------------------- |
| 닉네임 변경    | 마이페이지 내에서 클릭 한번으로 랜덤 닉네임으로 생성 (하루 1회) | 변경 여부 default : false, 매일 false로 초기화 |
| 활동 기록 확인 | 개인의 활동 기록(특정 조건 달성 여부)를 조회                 | 유저 테이블 내에서 cnt의 값 불러오기           |

- 닉네임 생성 패턴: 새인 척하는 ㅁ / 쥐인 척하는 ㅁ
- 닉네임 로직은 고민해보기 (레디스 사용?? )